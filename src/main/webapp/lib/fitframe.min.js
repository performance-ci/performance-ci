!function(t,i,e,s){function n(i,e,s){this.element=t(i),this.options=t.extend({},s,e),this._defaults=s,this._init()}var a="fitFrame",r="plugin_"+a;n.prototype={update:function(){"resize"===this.options.mode?this._resizeNew():this._wrapNew()},wrap:function(i){var e=100*this._calculateRatio(i)+"%",s=t("<div/>").addClass(this.options.wrapperCssClass).css("padding-bottom",e);return i.wrap(s).parent()},resize:function(t){return this._setupIframe(t),this._resizeIframe(t,this.element.width(),this.element.height(),this.options.fitHeight),t},destroy:function(){var i=this;"resize"===i.options.mode?(this.element.find("iframe."+this.options.iframeCssClass).each(function(){var e=t(this).data(a);t(this).removeClass(i.options.iframeCssClass).width(e.width).height(e.height).data(a,null)}),this._unbind()):this.element.find("."+this.options.wrapperCssClass).children().unwrap(),this.element.data(r,null)},_init:function(){"resize"===this.options.mode&&this._bind(),this.update()},_wrapNew:function(){var i=this,e=this.element.find("iframe").filter(function(){return!t(this).closest(i.options.wrapperCssClass).length});e.each(function(){i.wrap(t(this))})},_resizeNew:function(){var i=this;t("iframe").not(this.options.iframeCssClass).each(function(){i._setupIframe(t(this))}),this._resizeAll()},_setupIframe:function(t){t.data(a,{ratio:this._calculateRatio(t),width:t.width(),height:t.height()}).addClass(this.options.iframeCssClass)},_resizeAll:function(){var i=this,e=this.element.width(),s=this.element.height(),n=this.options.fitHeight;this.element.find("iframe."+this.options.iframeCssClass).each(function(){i._resizeIframe(t(this),e,s,n)})},_resizeIframe:function(t,i,e,s){var n=t.data(a).ratio,r=i*n;s&&r>e?t.height(e).width(e/n):t.height(i*n).width("100%")},_calculateRatio:function(t){var i=t.attr("width"),e=t.attr("height");return(e/i).toPrecision(4)},_bind:function(){var e,s=this;t(i).on("resize."+a,function(){clearTimeout(e),e=setTimeout(function(){s._resizeAll()},100)})},_unbind:function(){t(i).off("."+a)}},t.fn[a]=function(i){var e,h=arguments;return this.each(function(){var s=t.data(this,r);if(s){if("string"==typeof i&&"_"!==i[0]){var o=s[i];"function"==typeof o?e=o.apply(s,Array.prototype.slice.call(h,1)):t.error("Public method '"+i+"' does not exist on jQuery."+a)}}else t.data(this,r,new n(this,i,t.fn[a].defaults))}),e!==s?e:this},t.fn[a].defaults={wrapperCssClass:"fitframe-wrap",iframeCssClass:"fitframe",mode:"wrap",fitHeight:!1}}(jQuery,window,document);